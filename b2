-- Call ExitSeatStates after furniture use (DIRECT CALL - NO FUNCTION WRAPPER)
local function callExitSeatStates()
    debugPrint("Calling ExitSeatStates to reset seat states...")
    -- DIRECT CALL - no pcall, no function wrapper
    game:GetService("ReplicatedStorage"):WaitForChild("API"):WaitForChild("AdoptAPI/ExitSeatStates"):FireServer()
    debugPrint("Successfully called ExitSeatStates")
end

-- Use furniture with localPlayer (DIRECT CALL VERSION)
local function useFurnitureWithLocalPlayer(furnitureName)
    debugPrint("Using furniture for baby: " .. furnitureName .. " on localPlayer")
    local success = activateFurniture(furnitureName)
    
    if success then
        debugPrint("Successfully activated: " .. furnitureName)
        debugPrint("Waiting 20 seconds for cure...")
        task.wait(20) -- Wait for ailment cure
        
        -- DIRECT CALL to ExitSeatStates
        debugPrint("Calling ExitSeatStates to reset seat states...")
        game:GetService("ReplicatedStorage"):WaitForChild("API"):WaitForChild("AdoptAPI/ExitSeatStates"):FireServer()
        debugPrint("Successfully called ExitSeatStates")
        
        task.wait(2)
        debugPrint("Furniture use sequence completed for: " .. furnitureName)
        return true
    else
        debugPrint("Failed to activate furniture with localPlayer: " .. furnitureName)
        return false
    end
end

-- Test function to verify ExitSeatStates works (DIRECT CALL)
local function testExitSeatStates()
    debugPrint("TEST: Calling ExitSeatStates directly...")
    -- DIRECT CALL - no pcall, no function wrapper
    game:GetService("ReplicatedStorage"):WaitForChild("API"):WaitForChild("AdoptAPI/ExitSeatStates"):FireServer()
    debugPrint("TEST: ExitSeatStates call SUCCESSFUL")
end
