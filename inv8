-- ADOPT ME! — ТОЛЬКО ПИТОМЦЫ (ПОЛНАЯ ИНФА) — РАБОТАЕТ У ВСЕХ СЕЙЧАС
repeat task.wait() until game:IsLoaded()
task.wait(5)

local player = game.Players.LocalPlayer
local data = player.PlayerGui:WaitForChild("MainGui"):WaitForChild("Data").Value

local function safePairs(t) 
    return typeof(t) == "table" and pairs(t) or pairs({}) 
end

local function countTable(t)
    local c = 0
    if typeof(t) == "table" then for _ in pairs(t) do c += 1 end end
    return c
end

print("\nADOPT ME! — ТВОИ ПИТОМЦЫ (ПОЛНАЯ ИНФОРМАЦИЯ)")
print(string.rep("=", 60))

-- 3. ПИТОМЦЫ — главное богатство! (ИСПРАВЛЕНО И ЗАЩИЩЕНО)
if data.pet_manager or data.pets or (data.inventory and data.inventory.pets) then
    local pets = data.pet_manager and data.pet_manager.pets 
              or data.pets 
              or data.inventory and data.inventory.pets 
              or {}
              
    local total = countTable(pets)
    print("PETS — " .. total .. " питомцев всего:")
    
    if total == 0 then
        print("  Питомцев нет или они ещё грузятся...")
    else
        local shown = 0
        local list = {}
        
        for id, pet in safePairs(pets) do
            local props = pet.Properties or pet or {}
            
            local name   = props.Name or "Unknown"
            local rarity = props.Rarity or ""
            local age    = props.Age or "?"
            local neon   = props.Neon and "[NEON]" or ""
            local mega   = props.MegaNeon and "[MEGA]" or ""
            local ride   = props.Rideable and "[RIDE]" or ""
            local fly    = props.Flyable and "[FLY]" or ""
            
            table.insert(list, string.format(" %s %s %s%s%s%s%s | Age: %s",
                id:sub(1,8), name, rarity, neon, mega, ride, fly, age))
        end
        
        -- Сортируем по редкости (Legendary первыми)
        table.sort(list, function(a, b) 
            local ra = a:match("Legendary") and 1 or a:match("Ultra") and 2 or 3
            local rb = b:match("Legendary") and 1 or b:match("Ultra") and 2 or 3
            return ra < rb
        end)
        
        for _, line in ipairs(list) do
            if shown < 50 then
                print(line)
                shown += 1
            end
        end
        
        if total > 50 then 
            print(" ... и ещё " .. (total - 50) .. " питомцев") 
        end
    end
else
    print("Питомцы не найдены! (нет pet_manager / pets / inventory.pets)")
end

print("")
print(string.rep("=", 60))
print("ГОТОВО! НАЖМИ F9 → СДЕЛАЙ СКРИН → КИДАЙ В ДИСКОРД")
