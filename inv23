-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Recursive helper function to print tables with depth limit
local function printTableDeep(tbl, depth, maxDepth, prefix)
    if not tbl or type(tbl) ~= "table" then
        print(prefix .. tostring(tbl))
        return
    end
    
    local subCount = 0
    for _ in pairs(tbl) do subCount = subCount + 1 end
    
    if depth > maxDepth then
        print(prefix .. "[TABLE with " .. subCount .. " items - MAX DEPTH REACHED]")
        return
    end
    
    print(prefix .. "[TABLE with " .. subCount .. " items]")
    
    for key, value in pairs(tbl) do
        local keyStr = type(key) == "string" and key or tostring(key)
        local newPrefix = prefix .. "  "
        if depth < maxDepth then
            print(newPrefix .. "üìÅ " .. keyStr .. ":")
            printTableDeep(value, depth + 1, maxDepth, newPrefix .. "   ")
        else
            print(newPrefix .. "üìÅ " .. keyStr .. " [TABLE - expand if needed]")
        end
    end
end

-- Function to print ONLY the contents inside equip_manager.pets deeply
local function printEquipManagerPetsContents()
    print("üêæ PRINTING CONTENTS INSIDE EQUIP MANAGER > PETS")
    print("==================================================")
    
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    if not data.equip_manager then
        print("‚ùå No equip_manager found in data!")
        return
    end
    
    local petsData = data.equip_manager.pets
    if not petsData then
        print("‚ùå No 'pets' key found in equip_manager!")
        return
    end
    
    -- Print the direct contents of pets (starting from its immediate children)
    local totalSubItems = 0
    for key, value in pairs(petsData) do
        totalSubItems = totalSubItems + 1
        local keyStr = type(key) == "string" and key or tostring(key)
        print("üìÅ Direct Child: " .. keyStr)
        printTableDeep(value, 1, 5, "   ")  -- Increased max depth to 5 for deeper inspection
        print("   ---")
    end
    print("--- Total direct children in pets: " .. totalSubItems)
    print("")
end

-- Run the function
printEquipManagerPetsContents()
