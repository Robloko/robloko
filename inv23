-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Recursive helper function to print tables with depth limit
local function printTableDeep(tbl, depth, maxDepth, prefix)
    if not tbl or type(tbl) ~= "table" then
        print(prefix .. tostring(tbl))
        return
    end
    
    local subCount = 0
    for _ in pairs(tbl) do subCount = subCount + 1 end
    
    if depth > maxDepth then
        print(prefix .. "[TABLE with " .. subCount .. " items - MAX DEPTH REACHED]")
        return
    end
    
    print(prefix .. "[TABLE with " .. subCount .. " items]")
    
    for key, value in pairs(tbl) do
        local keyStr = type(key) == "string" and key or tostring(key)
        local newPrefix = prefix .. "  "
        if depth < maxDepth then
            print(newPrefix .. "ðŸ“ " .. keyStr .. ":")
            printTableDeep(value, depth + 1, maxDepth, newPrefix .. "   ")
        else
            print(newPrefix .. "ðŸ“ " .. keyStr .. " [TABLE - expand if needed]")
        end
    end
end

-- Function to inspect ONLY equip_manager more deeply
local function inspectEquipManagerDeep()
    print("ðŸ” DEEP INSPECTING EQUIP MANAGER")
    print("=====================================")
    
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    if not data.equip_manager then
        print("âŒ No equip_manager found in data!")
        return
    end
    
    print("âš™ï¸ EQUIP MANAGER (Deep Dive - Max Depth: 3)")
    local totalKeys = 0
    for key, value in pairs(data.equip_manager) do
        totalKeys = totalKeys + 1
        local keyStr = type(key) == "string" and key or tostring(key)
        print("   ðŸ“ Top-Level: " .. keyStr)
        printTableDeep(value, 1, 3, "      ")  -- Start with depth 1, max 3
        print("   ---")
    end
    print("   --- Total top-level keys: " .. totalKeys)
    print("")
end

-- Run the function
inspectEquipManagerDeep()
