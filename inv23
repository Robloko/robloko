-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Enhanced pretty-print function with higher depth and item limits
local function prettyPrint(value, depth, maxDepth, indent, maxItems)
    indent = indent or ""
    depth = depth or 0
    maxDepth = maxDepth or 5  -- Increased depth limit for deeper inspection
    maxItems = maxItems or 20  -- Increased items per level
    
    if depth > maxDepth then
        return indent .. "{... [DEPTH LIMIT REACHED at " .. maxDepth .. "]}"
    end
    
    local valueType = type(value)
    if valueType == "table" then
        local output = indent .. "{"
        local count = 0
        local keys = {}
        for key, _ in pairs(value) do
            table.insert(keys, key)
        end
        table.sort(keys)  -- Sort keys for consistent output
        
        for _, key in ipairs(keys) do
            local subValue = value[key]
            count = count + 1
            if count <= maxItems then
                local keyStr = type(key) == "string" and ("\"" .. key .. "\"") or tostring(key)
                output = output .. "\n" .. indent .. "  " .. keyStr .. ": " .. prettyPrint(subValue, depth + 1, maxDepth, indent .. "  ", maxItems)
            end
        end
        if count > maxItems then
            output = output .. "\n" .. indent .. "  ... and " .. (count - maxItems) .. " more items"
        end
        output = output .. "\n" .. indent .. "}"
        return output
    elseif valueType == "string" then
        return "\"" .. value .. "\""
    elseif valueType == "number" then
        return tostring(value)
    elseif valueType == "boolean" then
        return tostring(value)
    else
        return tostring(value)
    end
end

-- Function to deeply inspect only EQUIP_MANAGER
local function inspectEquipManagerDeeply()
    print("üîç DEEP INSPECTION OF EQUIP_MANAGER")
    print("=====================================")
    
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    local equipManager = data["EQUIP_MANAGER"]
    
    if not equipManager then
        print("‚ùå EQUIP_MANAGER not found in data!")
        return
    end
    
    print("Type: " .. type(equipManager))
    
    if type(equipManager) == "table" then
        local itemCount = 0
        for _ in pairs(equipManager) do itemCount = itemCount + 1 end
        print("Total Items: " .. itemCount)
        
        print("\nFull Contents (Deep Dive):")
        print(prettyPrint(equipManager, 0, 5, "", 20))  -- Deeper dive with higher limits
    else
        print("Value: " .. tostring(equipManager))
    end
end

-- Run the focused inspection
inspectEquipManagerDeeply()
