-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Function to pretty-print a value with depth limit
local function prettyPrint(value, depth, maxDepth, indent)
    indent = indent or ""
    depth = depth or 0
    maxDepth = maxDepth or 3  -- Prevent infinite recursion
    
    if depth > maxDepth then
        return indent .. "{... [DEPTH LIMIT REACHED]}"
    end
    
    local valueType = type(value)
    if valueType == "table" then
        local output = indent .. "{"
        local count = 0
        local maxItems = 10  -- Limit items per level to avoid spam
        for key, subValue in pairs(value) do
            count = count + 1
            if count <= maxItems then
                local keyStr = type(key) == "string" and ("\"" .. key .. "\"") or tostring(key)
                output = output .. "\n" .. indent .. "  " .. keyStr .. ": " .. prettyPrint(subValue, depth + 1, maxDepth, indent .. "    ")
            end
        end
        if count > maxItems then
            output = output .. "\n" .. indent .. "  ... and " .. (count - maxItems) .. " more items"
        end
        output = output .. "\n" .. indent .. "}"
        return output
    elseif valueType == "string" then
        return "\"" .. value .. "\""
    else
        return tostring(value)
    end
end

-- Function to inspect all manager categories deeply
local function inspectAllManagersDeeply()
    print("üîç DEEP INSPECTION OF ALL MANAGER CATEGORIES")
    print("=============================================")
    
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    local managerCount = 0
    
    -- Find and inspect all categories with "manager" in the name
    for categoryName, categoryData in pairs(data) do
        if string.find(string.lower(categoryName), "manager") then
            managerCount = managerCount + 1
            print("\nüéØ " .. string.upper(categoryName) .. ":")
            print("   Type: " .. type(categoryData))
            
            if type(categoryData) == "table" then
                local itemCount = 0
                for _ in pairs(categoryData) do itemCount = itemCount + 1 end
                print("   Total Items: " .. itemCount)
                
                -- Deep print the entire category (with limits)
                print("   Contents:")
                print(prettyPrint(categoryData, 0, 3, "     "))
            else
                print("   Value: " .. tostring(categoryData))
            end
            print("\n   ---")
        end
    end
    
    if managerCount == 0 then
        print("‚ùå No manager categories found")
    else
        print("\nüìä Total manager categories inspected: " .. managerCount)
    end
end

-- Run the function
inspectAllManagersDeeply()
