-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Function to deeply inspect a specific manager
local function deepInspectManager(managerName)
    print("üîç DEEP INSPECTION: " .. managerName)
    print("====================================")
    
    local success, clientData = pcall(require, ReplicatedStorage.ClientModules.Core.ClientData)
    if not success then
        print("‚ùå Failed to load ClientData module")
        return
    end
    
    local playerData = clientData.get_data()
    if not playerData or not playerData[player.Name] then
        print("‚ùå No data found for player: " .. player.Name)
        return
    end
    
    local data = playerData[player.Name]
    local managerData = data[managerName]
    
    if not managerData then
        print("‚ùå Manager not found: " .. managerName)
        return
    end
    
    print("üìä Manager Type: " .. type(managerData))
    
    if type(managerData) == "table" then
        local function inspectTable(tbl, prefix, depth)
            if depth > 3 then -- Prevent infinite recursion
                print(prefix .. "üìÅ [MAX DEPTH REACHED]")
                return
            end
            
            for key, value in pairs(tbl) do
                local valueType = type(value)
                local newPrefix = prefix .. "  "
                
                if valueType == "table" then
                    local tableSize = 0
                    for _ in pairs(value) do tableSize = tableSize + 1 end
                    
                    print(prefix .. "üìÅ " .. tostring(key) .. " [TABLE with " .. tableSize .. " items]")
                    
                    -- Inspect nested table (limited to first 10 items for large tables)
                    local count = 0
                    for subKey, subValue in pairs(value) do
                        count = count + 1
                        if count <= 10 then
                            local subType = type(subValue)
                            if subType == "table" then
                                local subSize = 0
                                for _ in pairs(subValue) do subSize = subSize + 1 end
                                print(newPrefix .. "üìÅ " .. tostring(subKey) .. " [TABLE with " .. subSize .. " items]")
                            else
                                print(newPrefix .. "üìÑ " .. tostring(subKey) .. " = " .. tostring(subValue) .. " [" .. subType .. "]")
                            end
                        else
                            print(newPrefix .. "... and " .. (tableSize - 10) .. " more items")
                            break
                        end
                    end
                    
                    -- Recursively inspect small tables
                    if tableSize <= 5 and tableSize > 0 then
                        inspectTable(value, newPrefix, depth + 1)
                    end
                else
                    print(prefix .. "üìÑ " .. tostring(key) .. " = " .. tostring(value) .. " [" .. valueType .. "]")
                end
            end
        end
        
        inspectTable(managerData, "", 1)
    else
        print("üìÑ Value: " .. tostring(managerData))
    end
end

-- Function to inspect all managers found in your screenshots
local function inspectAllSpecificManagers()
    local managersToInspect = {
        "AILMENTS_MANAGER",
        "STATE_MANAGER_RAW", 
        "PET_STATE_MANAGERS",
        "ADMIN_ABUSE_MANAGER",
        "QUEST_MANAGER"
    }
    
    for _, managerName in ipairs(managersToInspect) do
        deepInspectManager(managerName)
        print("\n" .. string.rep("=", 50) .. "\n")
    end
end

-- Function to get specific details about each manager
local function getManagerSpecificDetails()
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    -- AILMENTS_MANAGER deep inspection
    if data.AILMENTS_MANAGER then
        print("üéØ AILMENTS_MANAGER DEEP DIVE:")
        local am = data.AILMENTS_MANAGER
        if am.ailments and type(am.ailments) == "table" then
            print("   Ailments count: " .. tostring(#am.ailments))
            for i, ailment in ipairs(am.ailments) do
                if i <= 5 then -- Show first 5 ailments
                    print("   ü§í Ailment " .. i .. ": " .. tostring(ailment))
                end
            end
        end
        if am.baby_ailments and type(am.baby_ailments) == "table" then
            print("   Baby ailments count: " .. tostring(#am.baby_ailments))
        end
        if am.schedules and type(am.schedules) == "table" then
            print("   Schedules count: " .. tostring(#am.schedules))
        end
    end
    
    -- QUEST_MANAGER deep inspection
    if data.QUEST_MANAGER then
        print("\nüéØ QUEST_MANAGER DEEP DIVE:")
        local qm = data.QUEST_MANAGER
        if qm.quests_cached and type(qm.quests_cached) == "table" then
            print("   Cached quests: " .. tostring(#qm.quests_cached))
            for i, quest in ipairs(qm.quests_cached) do
                if i <= 3 then -- Show first 3 quests
                    print("   üéØ Quest " .. i .. ": " .. tostring(quest))
                end
            end
        end
        if qm.daily_quest_data and type(qm.daily_quest_data) == "table" then
            print("   Daily quest data items: " .. tostring(#qm.daily_quest_data))
        end
    end
    
    -- ADMIN_ABUSE_MANAGER deep inspection
    if data.ADMIN_ABUSE_MANAGER then
        print("\nüéØ ADMIN_ABUSE_MANAGER DEEP DIVE:")
        local aam = data.ADMIN_ABUSE_MANAGER
        if aam.currency_drops and type(aam.currency_drops) == "table" then
            print("   Currency drops count: " .. tostring(#aam.currency_drops))
        end
        if aam.xp_drops and type(aam.xp_drops) == "table" then
            print("   XP drops count: " .. tostring(#aam.xp_drops))
        end
    end
    
    -- PET_STATE_MANAGERS deep inspection
    if data.PET_STATE_MANAGERS then
        print("\nüéØ PET_STATE_MANAGERS DEEP DIVE:")
        local psm = data.PET_STATE_MANAGERS
        print("   Pet states count: " .. tostring(#psm))
        for i, petState in ipairs(psm) do
            if i <= 3 then -- Show first 3 pet states
                print("   üêæ Pet State " .. i .. " type: " .. type(petState))
                if type(petState) == "table" then
                    for key, value in pairs(petState) do
                        print("      " .. key .. ": " .. tostring(value) .. " [" .. type(value) .. "]")
                    end
                end
            end
        end
    end
    
    -- STATE_MANAGER_RAW deep inspection
    if data.STATE_MANAGER_RAW then
        print("\nüéØ STATE_MANAGER_RAW DEEP DIVE:")
        local smr = data.STATE_MANAGER_RAW
        if smr.states and type(smr.states) == "table" then
            print("   States count: " .. tostring(#smr.states))
            for stateName, stateValue in pairs(smr.states) do
                print("   üè∑Ô∏è " .. stateName .. ": " .. tostring(stateValue) .. " [" .. type(stateValue) .. "]")
            end
        end
        if smr.chars_connected_to_me and type(smr.chars_connected_to_me) == "table" then
            print("   Connected chars: " .. tostring(#smr.chars_connected_to_me))
        end
    end
end

-- Run the inspections
print("üöÄ STARTING DEEP MANAGER INSPECTION")
print("====================================")

-- Choose one of these:
-- inspectAllSpecificManagers()  -- For full deep inspection
getManagerSpecificDetails()      -- For targeted details

print("\n‚úÖ INSPECTION COMPLETE")
