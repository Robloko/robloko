-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Step 1: Safely get the ClientData module
print("ğŸ” STEP 1: Loading ClientData module...")
local clientData
local success, err = pcall(function()
    clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
end)

if not success then
    print("âŒ FAILED: " .. tostring(err))
    return
else
    print("âœ… SUCCESS: ClientData loaded")
end

-- Step 2: Safely get player data
print("ğŸ” STEP 2: Getting player data...")
local playerData
success, err = pcall(function()
    playerData = clientData.get_data()
end)

if not success then
    print("âŒ FAILED: " .. tostring(err))
    return
else
    print("âœ… SUCCESS: Player data retrieved")
end

-- Step 3: Check if our player exists in data
print("ğŸ” STEP 3: Finding data for player: " .. player.Name)
if not playerData or not playerData[player.Name] then
    print("âŒ FAILED: No data found for player " .. player.Name)
    return
else
    print("âœ… SUCCESS: Player data found")
end

local data = playerData[player.Name]

-- Step 4: List ALL available categories first
print("\nğŸ“‹ STEP 4: Listing ALL available categories:")
print("==========================================")
local allCategories = {}
for categoryName, categoryData in pairs(data) do
    table.insert(allCategories, categoryName)
    local itemCount = 0
    if type(categoryData) == "table" then
        for _ in pairs(categoryData) do itemCount = itemCount + 1 end
    end
    print("ğŸ“ " .. categoryName .. " (" .. itemCount .. " items) [" .. type(categoryData) .. "]")
end

print("\nğŸ“Š Total categories: " .. #allCategories)

-- Step 5: Find and list only manager categories
print("\nğŸ¯ STEP 5: Finding manager categories:")
print("=====================================")
local managerCategories = {}
for _, categoryName in pairs(allCategories) do
    if string.find(string.lower(categoryName), "manager") then
        table.insert(managerCategories, categoryName)
    end
end

if #managerCategories == 0 then
    print("âŒ No manager categories found!")
    print("ğŸ’¡ Try searching for categories with different names...")
else
    print("âœ… Found " .. #managerCategories .. " manager categories:")
    for i, managerName in pairs(managerCategories) do
        print(i .. ". " .. managerName)
    end
end

-- Step 6: Inspect each manager category
print("\nğŸ” STEP 6: Inspecting manager categories:")
print("========================================")

for _, managerName in pairs(managerCategories) do
    print("\nğŸ¯ " .. managerName .. ":")
    local managerData = data[managerName]
    
    if type(managerData) ~= "table" then
        print("   Value: " .. tostring(managerData))
        print("   Type: " .. type(managerData))
    else
        print("   Type: table")
        local itemCount = 0
        for _ in pairs(managerData) do itemCount = itemCount + 1 end
        print("   Items: " .. itemCount)
        
        -- Show each item in the manager
        for key, value in pairs(managerData) do
            local valueType = type(value)
            if valueType == "table" then
                local subCount = 0
                for _ in pairs(value) do subCount = subCount + 1 end
                print("   ğŸ“ " .. key .. " [TABLE with " .. subCount .. " items]")
            else
                print("   ğŸ“„ " .. key .. " = " .. tostring(value) .. " [" .. valueType .. "]")
            end
        end
    end
    print("   ---")
end

print("\nâœ… INSPECTION COMPLETE!")
