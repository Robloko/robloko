local function getPetPenSlots()
    local ClientData = require(game:GetService("ReplicatedStorage").ClientModules.Core.ClientData)
    local player = game.Players.LocalPlayer
    
    local data = ClientData.get_data()[player.Name]
    if not data then return {} end
    
    local manager = data.idle_progression_manager
    if not manager or not manager.active_pets then return {} end
    
    local petPenSlots = {}
    
    for _, petUnique in pairs(manager.active_pets) do
        local petData = data.inventory.pets[petUnique]
        if petData then
            table.insert(petPenSlots, {
                name = petData.id,
                age = petData.properties.age,
                neon = petData.properties.neon or false,
                unique = petUnique
            })
        end
    end
    
    return petPenSlots
end

-- Simple usage examples:

-- 1. Print current PetPen status
local function printPetPenStatus()
    local slots = getPetPenSlots()
    print("=== PETPEN STATUS ===")
    print("Slots used: " .. #slots .. "/4")
    
    for i, pet in ipairs(slots) do
        local neonText = pet.neon and "ðŸŒŸ NEON" or ""
        print(string.format("Slot %d: %s (Age: %d) %s", i, pet.name, pet.age, neonText))
    end
    print("====================")
end

-- 2. Check if PetPen has space
local function hasPetPenSpace()
    return #getPetPenSlots() < 4
end

-- 3. Get aged pets (6+) for removal
local function getAgedPetsInPen()
    local agedPets = {}
    local slots = getPetPenSlots()
    
    for _, pet in ipairs(slots) do
        if pet.age >= 6 then
            table.insert(agedPets, pet)
        end
    end
    
    return agedPets
end

-- 4. Simple slot count
local function getUsedPetPenSlots()
    return #getPetPenSlots()
end

-- Call it anytime:
printPetPenStatus()

-- Or use in your Auto PetPen:
local usedSlots = getUsedPetPenSlots()
local availableSlots = 4 - usedSlots
print("Available slots: " .. availableSlots)
