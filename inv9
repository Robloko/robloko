-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Function to safely get player data
local function getPlayerData()
    local clientModules = ReplicatedStorage:WaitForChild("ClientModules", 10)
    if not clientModules then
        warn("ClientModules not found in ReplicatedStorage!")
        return nil
    end

    local coreModule = clientModules:WaitForChild("Core", 5)
    if not coreModule then
        warn("Core module not found in ClientModules!")
        return nil
    end

    local clientDataModule = coreModule:WaitForChild("ClientData", 5)
    if not clientDataModule then
        warn("ClientData module not found in Core!")
        return nil
    end

    local clientData
    local success, err = pcall(function()
        clientData = require(clientDataModule)
    end)

    if not success or not clientData then
        warn("Failed to load ClientData: " .. tostring(err))
        return nil
    end

    local playerData
    success, err = pcall(function()
        playerData = clientData.get_data()[player.Name]
    end)

    if not success or not playerData then
        warn("Failed to get player data: " .. tostring(err))
        return nil
    end

    return playerData
end

-- Function to inspect all pets in compact form
local function inspectAllPetsCompact()
    print("üîç INSPECTING ALL PETS INVENTORY (COMPACT)")
    print("=========================================")

    local playerData = getPlayerData()
    if not playerData then
        print("‚ùå Failed to get player data")
        return
    end

    if not playerData.inventory or not playerData.inventory.pets then
        print("‚ùå No pets found in inventory")
        return
    end

    local petList = {}
    for petUniqueID, petData in pairs(playerData.inventory.pets) do
        table.insert(petList, {
            name = petData.id or "Unknown",
            uniqueID = petUniqueID,
            age = petData.properties and petData.properties.age or "?",
            neon = petData.properties and petData.properties.neon and "‚úÖ" or "‚ùå",
            megaNeon = petData.properties and petData.properties.mega_neon and "‚úÖ" or "‚ùå"
        })
    end

    table.sort(petList, function(a, b)
        return a.name < b.name
    end)

    print(string.format("üìä Total pets: %d", #petList))
    print(string.format("%-25s %-36s %-5s %-8s %-8s", "Name", "Unique ID", "Age", "Neon", "Mega Neon"))
    print(string.rep("-", 85))

    for _, pet in ipairs(petList) do
        print(string.format("%-25s %-36s %-5s %-8s %-8s",
            pet.name:sub(1, 25),
            pet.uniqueID:sub(1, 36),
            pet.age,
            pet.neon,
            pet.megaNeon))
    end
end

-- Run the function
inspectAllPetsCompact()
