-- Advanced Gingerbread Debugger
local function deepDebugGingerbread(index)
    print("\n=== DEEP DEBUG Gingerbread " .. index .. " ===")
    
    local christmasMap = workspace.Interiors["MainMap!Christmas"]
    local gingerbread = christmasMap:GetChildren()[index]
    
    if not gingerbread then
        print("No gingerbread at index", index)
        return
    end
    
    print("Name:", gingerbread.Name)
    print("ClassName:", gingerbread.ClassName)
    
    -- 1. List ALL children recursively
    local function printTree(obj, depth)
        local prefix = string.rep("  ", depth)
        print(prefix .. obj.Name .. " (" .. obj.ClassName .. ")")
        
        -- Print important properties
        if obj:IsA("BasePart") then
            print(prefix .. "  Position: " .. math.floor(obj.Position.X) .. ", " .. 
                  math.floor(obj.Position.Y) .. ", " .. math.floor(obj.Position.Z))
            
            -- Check MeshId if MeshPart
            if obj:IsA("MeshPart") then
                print(prefix .. "  MeshId:", obj.MeshId)
                print(prefix .. "  TextureID:", obj.TextureID)
            end
        end
        
        -- Check ALL attributes
        local attributes = obj:GetAttributes()
        if next(attributes) then
            print(prefix .. "  Attributes:")
            for attrName, attrValue in pairs(attributes) do
                print(prefix .. "    " .. attrName .. " = " .. tostring(attrValue))
            end
        end
        
        -- Recursively print children
        for _, child in pairs(obj:GetChildren()) do
            printTree(child, depth + 1)
        end
    end
    
    printTree(gingerbread, 0)
    
    -- 2. Look for ANY UUID pattern in the entire object
    print("\n=== SEARCHING FOR UUID PATTERNS ===")
    
    local function searchForUUID(obj, path)
        local found = false
        
        -- Check string properties
        local stringProperties = {"Name", "MeshId", "TextureID"}
        for _, prop in ipairs(stringProperties) do
            if obj[prop] and type(obj[prop]) == "string" then
                local uuidPattern = "{(........%-....%-....%-....%-............)}"
                local uuid = obj[prop]:match(uuidPattern)
                if uuid then
                    print("✓ FOUND UUID in " .. path .. "." .. prop .. ": {" .. uuid .. "}")
                    found = true
                end
            end
        end
        
        -- Check attributes
        local attributes = obj:GetAttributes()
        for attrName, attrValue in pairs(attributes) do
            if type(attrValue) == "string" then
                local uuidPattern = "{(........%-....%-....%-....%-............)}"
                local uuid = attrValue:match(uuidPattern)
                if uuid then
                    print("✓ FOUND UUID in " .. path .. " attribute '" .. attrName .. "': {" .. uuid .. "}")
                    found = true
                end
            end
        end
        
        -- Recursive search
        for _, child in pairs(obj:GetChildren()) do
            if searchForUUID(child, path .. "." .. child.Name) then
                found = true
            end
        end
        
        return found
    end
    
    if not searchForUUID(gingerbread, "GingerbreadRig") then
        print("✗ No UUID pattern found in entire object!")
    end
    
    print("=== DEBUG COMPLETE ===\n")
end

-- Test with your working index 82
deepDebugGingerbread(82)
