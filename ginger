-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
ScreenGui.Name = "GingerbreadGUI"

-- Create TextButton (üç™ button)
local button = Instance.new("TextButton", ScreenGui)
button.Text = "üç™"
button.Size = UDim2.new(0, 50, 0, 50)
button.Position = UDim2.new(0.5, -25, 0.9, -25)
button.BackgroundColor3 = Color3.fromRGB(255, 102, 102)
button.TextScaled = true

-- Create TextLabel (to show gingerbread count)
local label = Instance.new("TextLabel", ScreenGui)
label.Size = UDim2.new(0, 200, 0, 50)
label.Position = UDim2.new(0.5, -100, 0.8, -25)
label.BackgroundTransparency = 0.5
label.Text = "Gingerbread: 0"
label.TextScaled = true

-- Function to get current gingerbread_2025 value
local function getCurrentGingerbread()
    local success, clientData = pcall(require, ReplicatedStorage.ClientModules.Core.ClientData)
    if not success then
        print("‚ùå Failed to load ClientData")
        return 0
    end

    local success2, allData = pcall(clientData.get_data, clientData)
    if not success2 or not allData[player.Name] then
        print("‚ùå Failed to get player data")
        return 0
    end

    local playerData = allData[player.Name]
    local gingerbread = 0

    -- Option 1: Direct property
    if playerData.gingerbread_2025 then
        gingerbread = playerData.gingerbread_2025
    -- Option 2: In inventory or special currency section
    elseif playerData.inventory and playerData.inventory.currency then
        gingerbread = playerData.inventory.currency.gingerbread_2025 or 0
    -- Option 3: Scan all top-level properties
    else
        for key, value in pairs(playerData) do
            if type(key) == "string" and string.find(key:lower(), "gingerbread") then
                print("üìå Found gingerbread property: " .. key .. " = " .. tostring(value))
                if key == "gingerbread_2025" then
                    gingerbread = value
                end
            end
        end
    end

    return gingerbread
end

-- Function to update the label
local function updateGingerbreadDisplay()
    local gingerbread = getCurrentGingerbread()
    label.Text = string.format("Gingerbread: %d", gingerbread)
end

-- Button click event
button.MouseButton1Click:Connect(function()
    updateGingerbreadDisplay()
end)

-- Optional: Auto-update every second
coroutine.wrap(function()
    while true do
        updateGingerbreadDisplay()
        task.wait(1)
    end
end)()
