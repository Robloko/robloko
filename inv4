-- FINAL INSPECT idle_progression_manager (works 100% – Nov 06, 2025)
local function inspectIdleProgressionManager()
    print("INSPECTING idle_progression_manager – FULL DEEP DIVE")
    print("======================================================")

    -- INFINITE WAIT FOR ClientModules (never fails)
    local ClientModules = ReplicatedStorage:FindFirstChild("ClientModules")
    if not ClientModules then
        print("ClientModules missing – waiting forever...")
        ClientModules = ReplicatedStorage:WaitForChild("ClientModules")
    end

    local Core = ClientModules:FindFirstChild("Core")
    if not Core then Core = ClientModules:WaitForChild("Core") end

    local ClientData = Core:FindFirstChild("ClientData")
    if not ClientData then ClientData = Core:WaitForChild("ClientData") end

    local clientData = require(ClientData)
    
    local data = clientData.get_data()[player.Name]
    if not data then
        return print("Player data not loaded yet!")
    end

    local idleMgr = data.idle_progression_manager
    if not idleMgr then
        return print("idle_progression_manager NOT FOUND!")
    end

    print("idle_progression_manager FOUND! Type: table")
    print("Keys ("..#idleMgr.."):")
    for k, v in pairs(idleMgr) do
        if type(v) == "table" then
            local count = 0
            for _ in pairs(v) do count += 1 end
            print("  ["..tostring(k).."] → table ("..count.." items)")
        else
            print("  ["..tostring(k).."] → "..type(v).." = "..tostring(v))
        end
    end

    print("\nPET PEN DETAILS:")
    local pen = idleMgr.pet_pen
    if pen and #pen > 0 then
        print("pet_pen has "..#pen.."/4 pets:")
        for i, slot in ipairs(pen) do
            local pet = slot.pet_data
            if pet then
                print(string.format("  Slot %d → %s | Age: %d | Unique: %s", 
                    i, pet.id or "unknown", pet.age or 0, tostring(pet.unique):sub(1,12)))
            end
        end
    else
        print("pet_pen is EMPTY or missing")
    end

    print("\n=== INSPECTION COMPLETE ===")
end

-- RUN IT
inspectIdleProgressionManager()
