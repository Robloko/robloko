task.wait(5)  -- Wait for game to load

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- Wait for player GUI to load
repeat task.wait() until localPlayer.PlayerGui

-- Target the specific button path
local buttonContainer = localPlayer.PlayerGui:FindFirstChild("DialogApp") 
    and localPlayer.PlayerGui.DialogApp:FindFirstChild("Dialog")
    and localPlayer.PlayerGui.DialogApp.Dialog:FindFirstChild("CheckboxDialog")
    and localPlayer.PlayerGui.DialogApp.Dialog.CheckboxDialog:FindFirstChild("Buttons")

if buttonContainer then
    -- Get the third button (index 3 in the array)
    local buttons = buttonContainer:GetChildren()
    
    -- Find the third button (you might need to adjust if there are other UI elements in the container)
    local targetButton = nil
    local buttonCount = 0
    
    for _, child in ipairs(buttons) do
        if child:IsA("GuiButton") or child:IsA("TextButton") or child:IsA("ImageButton") then
            buttonCount = buttonCount + 1
            if buttonCount == 3 then
                targetButton = child
                break
            end
        end
    end
    
    if targetButton then
        -- Check if button is visible and interactable
        if targetButton.Visible 
            and targetButton.Active 
            and (targetButton:IsA("GuiButton") or targetButton:IsA("TextButton") or targetButton:IsA("ImageButton"))
        then
            print("Found target button:", targetButton.Name)
            
            -- Click the button using multiple methods for reliability
            -- Method 1: Direct click event
            if targetButton:IsA("TextButton") or targetButton:IsA("ImageButton") then
                firesignal(targetButton.MouseButton1Down)
                task.wait(0.05)
                firesignal(targetButton.MouseButton1Up)
                firesignal(targetButton.MouseButton1Click)
            end
            
            -- Method 2: Fire the Activated event (if it exists)
            if targetButton.Activated then
                firesignal(targetButton.Activated)
            end
            
            -- Method 3: If it's a TextButton with a Click event
            if targetButton:FindFirstChild("Click") then
                firesignal(targetButton.Click)
            end
            
            print("Successfully clicked button:", targetButton.Name)
        else
            warn("Button found but not interactive:", 
                  "Visible:", targetButton.Visible, 
                  "Active:", targetButton.Active, 
                  "Class:", targetButton.ClassName)
        end
    else
        warn("Could not find third button in Buttons container")
        print("All children in Buttons container:")
        for i, child in ipairs(buttons) do
            print(i, child.Name, child.ClassName)
        end
    end
else
    warn("Button container not found in GUI hierarchy")
    
    -- Debug: Print the current GUI structure
    print("Current PlayerGui structure:")
    local function printChildren(parent, indent)
        for _, child in ipairs(parent:GetChildren()) do
            print(indent .. child.Name .. " (" .. child.ClassName .. ")")
            if #child:GetChildren() > 0 then
                printChildren(child, indent .. "  ")
            end
        end
    end
    
    if localPlayer.PlayerGui then
        printChildren(localPlayer.PlayerGui, "")
    end
end
