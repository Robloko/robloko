task.wait(5)

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

repeat task.wait() until localPlayer.PlayerGui

-- First, let's see what's in the DialogApp
local dialogApp = localPlayer.PlayerGui:FindFirstChild("DialogApp")
if not dialogApp then
    warn("DialogApp not found!")
    return
end

print("=== DialogApp Structure ===")
local function printGuiTree(gui, indent)
    if not gui then return end
    
    for _, child in ipairs(gui:GetChildren()) do
        local info = indent .. child.Name .. " (" .. child.ClassName .. ")"
        
        if child:IsA("TextButton") or child:IsA("TextLabel") then
            info = info .. " Text: '" .. tostring(child.Text) .. "'"
        end
        
        if child:IsA("GuiObject") then
            info = info .. " Visible: " .. tostring(child.Visible)
            info = info .. " Active: " .. tostring(child.Active)
        end
        
        print(info)
        
        -- Only go deeper if it's likely a container
        if child:IsA("Frame") or child:IsA("ScrollingFrame") or child:IsA("CanvasGroup") then
            printGuiTree(child, indent .. "  ")
        end
    end
end

printGuiTree(dialogApp, "")

-- Now try to click the specific button
local buttons = localPlayer.PlayerGui.DialogApp.Dialog.CheckboxDialog.Buttons:GetChildren()
print("\n=== All Buttons in Container ===")
for i, button in ipairs(buttons) do
    print(i, button.Name, button.ClassName, 
          button:IsA("TextButton") and "Text: '" .. button.Text .. "'" or "")
end

-- Click the third button (index 3)
if #buttons >= 3 then
    local targetButton = buttons[3]
    
    if targetButton:IsA("GuiButton") then
        print("\nAttempting to click button #3:", targetButton.Name)
        
        -- Click with error handling
        local success, errorMsg = pcall(function()
            firesignal(targetButton.MouseButton1Click)
        end)
        
        if success then
            print("Click successful!")
        else
            warn("Click failed:", errorMsg)
        end
    end
end
