-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Function to deeply inspect house_interior
local function inspectHouseInterior()
    print("üîç DEEP INSPECTION OF HOUSE INTERIOR")
    print("====================================")
    
    local clientData = require(ReplicatedStorage.ClientModules.Core.ClientData)
    local data = clientData.get_data()[player.Name]
    
    if not data.house_interior then
        print("‚ùå No house_interior data found")
        return
    end
    
    print("üè† HOUSE INTERIOR STRUCTURE:")
    print("============================")
    
    local function inspectTable(tbl, indent, path)
        indent = indent or 0
        path = path or "house_interior"
        local indentStr = string.rep("  ", indent)
        
        for key, value in pairs(tbl) do
            local currentPath = path .. "." .. key
            
            if type(value) == "table" then
                local tableSize = 0
                for _ in pairs(value) do tableSize = tableSize + 1 end
                
                print(indentStr .. "üìÅ " .. key .. " [TABLE with " .. tableSize .. " items]")
                
                -- Only go deeper if it's not too large and we're not too deep
                if tableSize <= 20 and indent < 3 then
                    inspectTable(value, indent + 1, currentPath)
                elseif tableSize > 20 then
                    print(indentStr .. "  ‚ö†Ô∏è  Large table, showing first 5 items:")
                    local count = 0
                    for subKey, subValue in pairs(value) do
                        if count < 5 then
                            if type(subValue) == "table" then
                                local subSize = 0
                                for _ in pairs(subValue) do subSize = subSize + 1 end
                                print(indentStr .. "  üìÅ " .. subKey .. " [TABLE with " .. subSize .. " items]")
                            else
                                print(indentStr .. "  üìÑ " .. subKey .. " = " .. tostring(subValue))
                            end
                            count = count + 1
                        else
                            print(indentStr .. "  ... and " .. (tableSize - 5) .. " more items")
                            break
                        end
                    end
                end
            else
                print(indentStr .. "üìÑ " .. key .. " = " .. tostring(value))
            end
        end
    end
    
    -- Start inspection
    inspectTable(data.house_interior)
    
    -- Special analysis for common house interior patterns
    print("\nüìä HOUSE INTERIOR ANALYSIS:")
    print("==========================")
    
    -- Check for furniture items
    if data.house_interior.furniture or data.house_interior.items then
        local furniture = data.house_interior.furniture or data.house_interior.items or {}
        local furnitureCount = 0
        for _ in pairs(furniture) do furnitureCount = furnitureCount + 1 end
        print("ü™ë Furniture Items: " .. furnitureCount)
    end
    
    -- Check for rooms
    if data.house_interior.rooms then
        local roomCount = 0
        for _ in pairs(data.house_interior.rooms) do roomCount = roomCount + 1 end
        print("üö™ Rooms: " .. roomCount)
    end
    
    -- Check for layout/walls
    if data.house_interior.layout or data.house_interior.walls then
        print("üèóÔ∏è  Layout/Walls data present")
    end
    
    -- Check for decorations
    if data.house_interior.decorations then
        local decorCount = 0
        for _ in pairs(data.house_interior.decorations) do decorCount = decorCount + 1 end
        print("üé® Decorations: " .. decorCount)
    end
    
    -- Check for upgrades
    if data.house_interior.upgrades then
        print("‚ö° Upgrades present")
        for upgradeName, upgradeData in pairs(data.house_interior.upgrades) do
            if type(upgradeData) == "table" then
                print("  üîß " .. upgradeName .. " [upgrade details]")
            else
                print("  üîß " .. upgradeName .. " = " .. tostring(upgradeData))
            end
        end
    end
    
    -- Summary
    local totalKeys = 0
    for _ in pairs(data.house_interior) do totalKeys = totalKeys + 1 end
    print("\nüìà SUMMARY:")
    print("Total top-level properties: " .. totalKeys)
end

-- Run the function
inspectHouseInterior()
