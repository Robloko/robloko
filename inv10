-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Player
local player = Players.LocalPlayer

-- Enhanced function to inspect all categories with more details
local function inspectAllCategories()
    print("üîç INSPECTING ALL CATEGORIES")
    print("============================")
    
    -- First test if we can get the module
    local success1, clientData = pcall(function()
        return require(ReplicatedStorage.ClientModules.Core.ClientData)
    end)
    
    if not success1 then
        print("‚ùå Failed to load ClientData: " .. tostring(clientData))
        return false
    end
    
    print("‚úÖ ClientData module loaded")
    
    -- Test if we can call get_data
    local success2, allData = pcall(function()
        return clientData.get_data()
    end)
    
    if not success2 then
        print("‚ùå Failed to call get_data: " .. tostring(allData))
        return false
    end
    
    print("‚úÖ get_data() works")
    
    -- Test if we can get player data
    if not allData[player.Name] then
        print("‚ùå No data found for player: " .. player.Name)
        
        -- Show what players ARE available
        print("üìã Available players in data:")
        for playerName, playerData in pairs(allData) do
            print("   üë§ " .. playerName)
        end
        return false
    end
    
    local data = allData[player.Name]
    print("‚úÖ Found player data for: " .. player.Name)
    
    -- Now safely list all categories with more details
    print("üìã ALL CATEGORIES:")
    local categoryCount = 0
    
    for categoryName, categoryData in pairs(data) do
        categoryCount = categoryCount + 1
        
        -- Get more information about the category
        local dataType = type(categoryData)
        local additionalInfo = ""
        
        if dataType == "table" then
            local subItemCount = 0
            for _ in pairs(categoryData) do
                subItemCount = subItemCount + 1
            end
            additionalInfo = " (contains " .. subItemCount .. " items)"
        elseif dataType == "number" then
            additionalInfo = " = " .. tostring(categoryData)
        elseif dataType == "string" then
            additionalInfo = " = \"" .. tostring(categoryData) .. "\""
        elseif dataType == "boolean" then
            additionalInfo = " = " .. tostring(categoryData)
        end
        
        print("üéØ " .. categoryName .. " [" .. dataType .. "]" .. additionalInfo)
        
        -- Show first few items if it's a table with items
        if dataType == "table" then
            local itemsShown = 0
            for key, value in pairs(categoryData) do
                if itemsShown < 3 then -- Show only first 3 items to avoid spam
                    local valueType = type(value)
                    local valuePreview = ""
                    
                    if valueType == "string" then
                        valuePreview = " = \"" .. tostring(value) .. "\""
                    elseif valueType == "number" or valueType == "boolean" then
                        valuePreview = " = " .. tostring(value)
                    end
                    
                    print("   ‚îú‚îÄ " .. tostring(key) .. " [" .. valueType .. "]" .. valuePreview)
                    itemsShown = itemsShown + 1
                else
                    local remainingItems = 0
                    for _ in pairs(categoryData) do remainingItems = remainingItems + 1 end
                    remainingItems = remainingItems - 3
                    if remainingItems > 0 then
                        print("   ‚îî‚îÄ ... and " .. remainingItems .. " more items")
                    end
                    break
                end
            end
        end
    end
    
    print("\nüìä SUMMARY:")
    print("Found " .. categoryCount .. " categories in player data")
    
    return true
end

-- Additional function to get specific category data
local function getCategoryData(categoryName)
    local success, clientData = pcall(function()
        return require(ReplicatedStorage.ClientModules.Core.ClientData)
    end)
    
    if not success then return nil end
    
    local success2, allData = pcall(function()
        return clientData.get_data()
    end)
    
    if not success2 then return nil end
    
    if allData[player.Name] and allData[player.Name][categoryName] then
        return allData[player.Name][categoryName]
    end
    
    return nil
end

-- Run the inspection
local success = inspectAllCategories()

if success then
    print("\nüéâ Inspection completed successfully!")
else
    print("\nüí• Inspection failed!")
end

-- Example of how to use getCategoryData
print("\nüîé EXAMPLE: Getting specific category")
local coins = getCategoryData("Coins") -- Replace "Coins" with an actual category name
if coins then
    print("Coins data: " .. tostring(coins))
else
    print("Coins category not found or error")
end
